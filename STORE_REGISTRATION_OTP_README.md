# ุชุญุฏูุซ ูุธุงู ุชุฃููุฏ ุงูุฅูููู ูู StoreRegistrationWizard

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุชุญุฏูุซ `StoreRegistrationWizard` ูุฅุถุงูุฉ ุชุฃููุฏ ุงูุฅูููู ุจุนุฏ ุฅูุดุงุก ุงููุณุชุฎุฏู ูุงููุงูู ูู ุงูุฎุทูุฉ 2. ุงูุขู ุจุนุฏ ุฅูุดุงุก ุงููุชุฌุฑ ูุงููุณุชุฎุฏู ูุงููุงููุ ุณูุชู ุฅุฑุณุงู ุฑูุฒ ุชุญูู ุฅูู ุฅูููู ุงููุณุชุฎุฏู ูุจู ุฅููุงู ุนูููุฉ ุงูุชุณุฌูู.

## ุงูุชุญุฏูุซุงุช ุงูููุทุจูุฉ

### 1. ุฅุถุงูุฉ ุงูู Imports ุงููุทููุจุฉ
```tsx
import OTPVerification from '../../components/Auth/OTPVerification';
import useOTP from '../../hooks/useOTP';
```

### 2. ุฅุถุงูุฉ ุงูู State ุงูุฌุฏูุฏ
```tsx
// ุฅุถุงูุฉ state ููุชุญูู ูู OTP
const [showOTP, setShowOTP] = useState(false);
const [registrationData, setRegistrationData] = useState<any>(null);
```

### 3. ุฅุถุงูุฉ ูุนุงูุฌุงุช OTP
```tsx
// ูุนุงูุฌุฉ ูุฌุงุญ ุงูุชุญูู ูู OTP
const handleOTPSuccess = () => {
  console.log('โ ุชู ุงูุชุญูู ูู ุงูุฅูููู ุจูุฌุงุญ');
  alert('ุชู ุงูุชุณุฌูู ุจูุฌุงุญ!');
  
  // ุฅุบูุงู ุงูููุฒุฑุฏ
  onClose();
  
  // ุฅุนุงุฏุฉ ุชุนููู ุงูุจูุงูุงุช
  resetWizardData();
};

// ูุนุงูุฌุฉ ุฅุนุงุฏุฉ ุฅุฑุณุงู OTP
const handleOTPResend = () => {
  console.log('๐ง ุชู ุฅุนุงุฏุฉ ุฅุฑุณุงู OTP');
  alert('ุชู ุฅุฑุณุงู ุฑูุฒ ุงูุชุญูู ูุฑุฉ ุฃุฎุฑู');
};

// ูุนุงูุฌุฉ ุงูุนูุฏุฉ ูู ุตูุญุฉ OTP
const handleOTPBack = () => {
  setShowOTP(false);
  if (registrationData) {
    console.log('ุงูุนูุฏุฉ ูู OTP - ุจูุงูุงุช ุงูุชุณุฌูู:', registrationData);
  }
  setRegistrationData(null);
};
```

### 4. ุชุญุฏูุซ ุฏุงูุฉ ุฅูุดุงุก ุงููุณุชุฎุฏู ูุงููุงูู
ุชู ุชุญุฏูุซ ุฏุงูุฉ `handleMerchantSubmit` ูุชุดูู:

```tsx
// ุญูุธ ุจูุงูุงุช ุงูุชุณุฌูู
setRegistrationData({ user, store, owner });

// ุฅุฑุณุงู OTP ููุชุญูู ูู ุงูุฅูููู
try {
  const storeSlug = store.slug || (store as any).name?.toLowerCase().replace(/\s+/g, '-') || 'default';
  const otpResult = await sendOTP(merchantData.email, storeSlug);
  
  if (otpResult.success) {
    console.log('๐ง ุชู ุฅุฑุณุงู OTP ุจูุฌุงุญ');
    setShowOTP(true);
  } else {
    console.log('โ ูุดู ูู ุฅุฑุณุงู OTP:', otpResult.error);
    alert('ุชู ุงูุชุณุฌูู ุจูุฌุงุญ! ููู ูุดู ูู ุฅุฑุณุงู ุฑูุฒ ุงูุชุญูู. ููููู ุชุณุฌูู ุงูุฏุฎูู ูุจุงุดุฑุฉ.');
    
    // ุฅุบูุงู ุงูููุฒุฑุฏ
    onClose();
    resetWizardData();
  }
} catch (otpError) {
  console.error('๐ฅ ุฎุทุฃ ูู ุฅุฑุณุงู OTP:', otpError);
  alert('ุชู ุงูุชุณุฌูู ุจูุฌุงุญ! ููู ูุดู ูู ุฅุฑุณุงู ุฑูุฒ ุงูุชุญูู. ููููู ุชุณุฌูู ุงูุฏุฎูู ูุจุงุดุฑุฉ.');
  
  // ุฅุบูุงู ุงูููุฒุฑุฏ
  onClose();
  resetWizardData();
}
```

### 5. ุฅุถุงูุฉ ุนุฑุถ ุตูุญุฉ OTP
```tsx
{showOTP ? (
  // OTP Verification Step
  <OTPVerification
    email={merchantData.email}
    onVerificationSuccess={handleOTPSuccess}
    onResendCode={handleOTPResend}
    onBack={handleOTPBack}
  />
) : currentStep === 1 ? (
  // Step 1: Store Registration
  // ...
) : (
  // Step 2: Merchant Registration
  // ...
)}
```

## ุชุฏูู ุงูุนูู ุงูุฌุฏูุฏ

1. **ุงูุฎุทูุฉ 1**: ุฅูุดุงุก ุงููุชุฌุฑ
2. **ุงูุฎุทูุฉ 2**: ุฅูุดุงุก ุงููุณุชุฎุฏู ูุงููุงูู
3. **ุฅุฑุณุงู OTP**: ุจุนุฏ ูุฌุงุญ ุฅูุดุงุก ุงููุณุชุฎุฏู ูุงููุงูู
4. **ุนุฑุถ ุตูุญุฉ OTP**: ูููุณุชุฎุฏู ูุฅุฏุฎุงู ุฑูุฒ ุงูุชุญูู
5. **ุงูุชุญูู ูู OTP**: ุนูุฏ ูุฌุงุญ ุงูุชุญููุ ูุชู ุฅููุงู ุงูุชุณุฌูู
6. **ุฅุบูุงู ุงูููุฒุฑุฏ**: ูุฅุนุงุฏุฉ ุชุนููู ุงูุจูุงูุงุช

## ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก
- ูู ุญุงูุฉ ูุดู ุฅุฑุณุงู OTPุ ูุชู ุฅููุงู ุงูุชุณุฌูู ูุน ุฑุณุงูุฉ ุชูุจูู
- ุงููุณุชุฎุฏู ููููู ุชุณุฌูู ุงูุฏุฎูู ูุจุงุดุฑุฉ ุญุชู ูู ูุดู ุฅุฑุณุงู OTP

### โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ูุญุณูุฉ
- ุนุฑุถ ุตูุญุฉ OTP ุฌูููุฉ ููุชุฌุงูุจุฉ
- ุฏุนู ุงููุบุชูู ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- ุฅููุงููุฉ ุงูุนูุฏุฉ ูู ุตูุญุฉ OTP
- ุฅุนุงุฏุฉ ุฅุฑุณุงู ุงูุฑูุฒ ูุน ุนุฏุงุฏ ุฒููู

### โ ุญูุธ ุงูุจูุงูุงุช
- ุญูุธ ุจูุงูุงุช ุงูุชุณุฌูู (ุงููุณุชุฎุฏูุ ุงููุชุฌุฑุ ุงููุงูู) ูู state
- ุฅููุงููุฉ ุงููุตูู ููุจูุงูุงุช ุนูุฏ ุงูุนูุฏุฉ ูู OTP

## API Endpoints ุงููุทููุจุฉ

ูุฌุจ ุฃู ูููู ูุฏูู endpoints ุงูุชุงููุฉ ูู ุงูุจุงู ุฅูุฏ:

### 1. ุฅุฑุณุงู OTP
```
POST /api/email-verification/send
Content-Type: application/json
Authorization: Bearer <token>

{
  "email": "user@example.com",
  "storeSlug": "my-store"
}
```

### 2. ุงูุชุญูู ูู OTP
```
POST /api/email-verification/verify
Content-Type: application/json
Authorization: Bearer <token>

{
  "email": "user@example.com",
  "otp": "12345"
}
```

### 3. ุฅุนุงุฏุฉ ุฅุฑุณุงู OTP
```
POST /api/email-verification/resend
Content-Type: application/json
Authorization: Bearer <token>

{
  "email": "user@example.com",
  "storeSlug": "my-store"
}
```

## ุงูุชุฎุตูุต

### ุชุบููุฑ storeSlug
ููููู ุชุฎุตูุต ููููุฉ ุฅูุดุงุก storeSlug:

```tsx
const storeSlug = store.slug || 
  (store as any).name?.toLowerCase().replace(/\s+/g, '-') || 
  'default';
```

### ุชุฎุตูุต ุงูุฑุณุงุฆู
ููููู ุชุฎุตูุต ุงูุฑุณุงุฆู ูู ูุนุงูุฌุงุช OTP:

```tsx
const handleOTPSuccess = () => {
  // ุฑุณุงูุฉ ูุฎุตุตุฉ
  alert('ูุฑุญุจุงู ุจู! ุชู ุงูุชุญูู ูู ุฅููููู ุจูุฌุงุญ');
  
  // ุฅุฌุฑุงุกุงุช ุฅุถุงููุฉ
  // ...
};
```

## ุงูุงุฎุชุจุงุฑ

ูุงุฎุชุจุงุฑ ุงููุธุงู:

1. ุงูุชุญ StoreRegistrationWizard
2. ุฃููู ุงูุฎุทูุฉ 1 (ุฅูุดุงุก ุงููุชุฌุฑ)
3. ุฃููู ุงูุฎุทูุฉ 2 (ุฅูุดุงุก ุงููุณุชุฎุฏู ูุงููุงูู)
4. ุชุญูู ูู ูุตูู ุงูุฅูููู
5. ุฃุฏุฎู ุงูุฑูุฒ ูู ุตูุญุฉ OTP
6. ุชุฃูุฏ ูู ูุฌุงุญ ุงูุชุญูู ูุฅุบูุงู ุงูููุฒุฑุฏ

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ูุดุงูู ุดุงุฆุนุฉ:

1. **ูุง ูุตู ุงูุฅูููู**: ุชุญูู ูู ุฅุนุฏุงุฏุงุช SMTP ูู ุงูุจุงู ุฅูุฏ
2. **ูุดู ูู ุฅูุดุงุก storeSlug**: ุชุญูู ูู ูุฌูุฏ slug ุฃู name ูู ุจูุงูุงุช ุงููุชุฌุฑ
3. **ุฎุทุฃ ูู API**: ุชุฃูุฏ ูู ูุฌูุฏ endpoints ุงููุทููุจุฉ
4. **ูุดุงูู ุงูุชุฑุฌูุฉ**: ุชุฃูุฏ ูู ูุฌูุฏ ููุงุชูุญ OTP ูู ูููุงุช ุงูุชุฑุฌูุฉ

## ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุฅุจูุงุบ ุนู ูุดุงููุ ูุฑุฌู ุงูุชูุงุตู ูุน ูุฑูู ุงูุชุทููุฑ.
