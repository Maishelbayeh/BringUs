# تحديثات Validation رقم الهاتف للمستخدمين

## التحديثات المضافة

### 1. رسائل الترجمة الجديدة
تم إضافة رسائل جديدة في ملفات الترجمة:

**الإنجليزية (en.json):**
```json
"phoneAlreadyExists": "Phone number is already in use by another user"
```

**العربية (ar.json):**
```json
"phoneAlreadyExists": "رقم الهاتف مستخدم بالفعل من قبل مستخدم آخر"
```

### 2. دالة التحقق من تكرار رقم الهاتف
تم إضافة دالة `checkPhoneExists` في `src/hooks/useUser.ts`:

```typescript
const checkPhoneExists = async (phone: string): Promise<boolean> => {
  try {
    const users = await getAllUsers();
    const phoneExists = users.some(user => user.phone === phone);
    return phoneExists;
  } catch (error) {
    return false;
  }
};
```

### 3. Validation محسن لرقم الهاتف
تم تحديث `src/pages/users/UserForm.tsx` لإضافة:

- **Validation فوري**: عند الكتابة في حقل رقم الهاتف
- **Validation عند الإرسال**: التحقق من صحة التنسيق وعدم التكرار
- **دعم التعديل**: السماح بتحديث رقم الهاتف لنفس المستخدم

### 4. قواعد Validation الجديدة
- يجب أن يبدأ رقم الهاتف بـ `+` متبوعاً برمز الدولة
- رمز الدولة يجب أن يبدأ برقم من 1-9
- الحد الأقصى للطول 15 رقم إجمالي
- لا يمكن تكرار رقم الهاتف بين المستخدمين

## كيفية الاستخدام

### في نموذج إضافة مستخدم جديد:
1. أدخل رقم هاتف صحيح (مثال: `+970591234567`)
2. سيتم التحقق من صحة التنسيق فوراً
3. عند الإرسال، سيتم التحقق من عدم تكرار الرقم

### في نموذج تعديل المستخدم:
1. يمكن تعديل رقم الهاتف
2. إذا كان الرقم الجديد مستخدماً من قبل مستخدم آخر، سيتم رفض التحديث
3. إذا كان الرقم لنفس المستخدم، سيتم السماح بالتحديث

## أمثلة على أرقام الهاتف الصحيحة:
- `+970591234567` (فلسطين)
- `+972594056090` (إسرائيل)
- `+12125551234` (أمريكا)
- `+441234567890` (بريطانيا)
- `+966501234567` (السعودية)

## أمثلة على أرقام الهاتف الخاطئة:
- `0591234567` (لا يبدأ بـ +)
- `970591234567` (لا يبدأ بـ +)
- `+0591234567` (رمز دولة يبدأ بصفر)
- `+970591234567890` (أكثر من 15 رقم)

## الملفات المحدثة:
1. `src/localization/en.json` - إضافة رسائل الترجمة الإنجليزية
2. `src/localization/ar.json` - إضافة رسائل الترجمة العربية
3. `src/hooks/useUser.ts` - إضافة دالة checkPhoneExists
4. `src/pages/users/UserForm.tsx` - تحديث validation رقم الهاتف

## ملاحظات مهمة:
- يتم التحقق من تكرار رقم الهاتف في قاعدة البيانات
- في حالة الخطأ في الاتصال، يتم السماح بالرقم (افتراضياً متاح)
- يتم مسح الأخطاء تلقائياً عند الكتابة الصحيحة
- يدعم اللغتين العربية والإنجليزية 