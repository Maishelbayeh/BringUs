<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… validation Ø§Ù„ØµÙˆØ±</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        .success {
            color: #28a745;
            background-color: #d4edda;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .error {
            color: #dc3545;
            background-color: #f8d7da;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .info {
            color: #0c5460;
            background-color: #d1ecf1;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        input[type="file"] {
            margin: 10px 0;
            padding: 10px;
            border: 2px dashed #007bff;
            border-radius: 5px;
            width: 100%;
        }
        button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .file-info {
            margin: 10px 0;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… validation Ø§Ù„ØµÙˆØ±</h1>
        <p>Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù Ù„Ø§Ø®ØªØ¨Ø§Ø± Ù†Ø¸Ø§Ù… validation Ø§Ù„ØµÙˆØ± Ù…Ø¹ Ø­Ø¯ 3 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª</p>

        <div class="test-section">
            <h2>ğŸ“ Ø§Ø®ØªØ¨Ø§Ø± ØµÙˆØ±Ø© ÙˆØ§Ø­Ø¯Ø©</h2>
            <input type="file" id="singleFile" accept="image/*" />
            <button onclick="testSingleFile()">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØµÙˆØ±Ø©</button>
            <div id="singleResult"></div>
        </div>

        <div class="test-section">
            <h2>ğŸ“ Ø§Ø®ØªØ¨Ø§Ø± ØµÙˆØ± Ù…ØªØ¹Ø¯Ø¯Ø©</h2>
            <input type="file" id="multipleFiles" accept="image/*" multiple />
            <button onclick="testMultipleFiles()">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØµÙˆØ±</button>
            <div id="multipleResult"></div>
        </div>

        <div class="test-section">
            <h2>â„¹ï¸ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h2>
            <div class="info">
                <strong>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰:</strong> 3 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª Ù„ÙƒÙ„ ØµÙˆØ±Ø©<br>
                <strong>Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ…Ø©:</strong> JPG, JPEG, PNG, GIF, WebP<br>
                <strong>Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ù…Ù„ÙØ§Øª:</strong> 10 Ù…Ù„ÙØ§Øª ÙÙŠ Ø§Ù„Ù…Ø±Ø© Ø§Ù„ÙˆØ§Ø­Ø¯Ø©
            </div>
        </div>
    </div>

    <script>
        // Ù…Ø­Ø§ÙƒØ§Ø© Ø¯ÙˆØ§Ù„ validation
        function validateImageFile(file) {
            const maxSize = 3 * 1024 * 1024; // 3MB
            const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp'];
            
            if (!allowedTypes.includes(file.type)) {
                return {
                    isValid: false,
                    errorMessage: `Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± ØµØ­ÙŠØ­. Ø§Ù„Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø©: ${allowedTypes.join(', ')}`
                };
            }
            
            if (file.size > maxSize) {
                const sizeInMB = (file.size / (1024 * 1024)).toFixed(2);
                return {
                    isValid: false,
                    errorMessage: `Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ${sizeInMB} Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª ÙŠØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­ (3 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª)`
                };
            }
            
            return { isValid: true };
        }

        function validateImageFiles(files) {
            const maxFiles = 10;
            
            if (files.length > maxFiles) {
                return {
                    isValid: false,
                    errorMessage: `Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù„ÙØ§Øª ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ø§Ù„Ù…Ø³Ù…ÙˆØ­: ${maxFiles}`
                };
            }
            
            const invalidFiles = [];
            let firstOversizedSizeMB;
            
            for (const file of files) {
                const validation = validateImageFile(file);
                if (!validation.isValid) {
                    invalidFiles.push(file.name);
                    if (file.size > 3 * 1024 * 1024 && !firstOversizedSizeMB) {
                        firstOversizedSizeMB = (file.size / (1024 * 1024)).toFixed(2);
                    }
                }
            }
            
            if (invalidFiles.length > 0) {
                const names = invalidFiles.join(', ');
                const message = invalidFiles.length > 1
                    ? `Ø§Ù„ØµÙˆØ± Ø§Ù„ØªØ§Ù„ÙŠØ© ØªØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­ (3 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª): ${names}`
                    : `Ø§Ù„ØµÙˆØ±Ø© "${names}" (${firstOversizedSizeMB} Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª) ØªØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ù…Ø³Ù…ÙˆØ­ (3 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª)`;
                
                return {
                    isValid: false,
                    errorMessage: message,
                    invalidFiles
                };
            }
            
            return { isValid: true };
        }

        function testSingleFile() {
            const fileInput = document.getElementById('singleFile');
            const resultDiv = document.getElementById('singleResult');
            
            if (fileInput.files.length === 0) {
                resultDiv.innerHTML = '<div class="error">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹</div>';
                return;
            }
            
            const file = fileInput.files[0];
            const validation = validateImageFile(file);
            
            let html = '<div class="file-info">';
            html += `<strong>Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù:</strong> ${file.name}<br>`;
            html += `<strong>Ø§Ù„Ù†ÙˆØ¹:</strong> ${file.type}<br>`;
            html += `<strong>Ø§Ù„Ø­Ø¬Ù…:</strong> ${(file.size / (1024 * 1024)).toFixed(2)} Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª<br>`;
            html += '</div>';
            
            if (validation.isValid) {
                html += '<div class="success">âœ… Ø§Ù„ØµÙˆØ±Ø© ØµØ§Ù„Ø­Ø© ÙˆÙŠÙ…ÙƒÙ† Ø±ÙØ¹Ù‡Ø§</div>';
            } else {
                html += `<div class="error">âŒ ${validation.errorMessage}</div>`;
            }
            
            resultDiv.innerHTML = html;
        }

        function testMultipleFiles() {
            const fileInput = document.getElementById('multipleFiles');
            const resultDiv = document.getElementById('multipleResult');
            
            if (fileInput.files.length === 0) {
                resultDiv.innerHTML = '<div class="error">ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ± Ø£ÙˆÙ„Ø§Ù‹</div>';
                return;
            }
            
            const files = Array.from(fileInput.files);
            const validation = validateImageFiles(files);
            
            let html = '<div class="file-info">';
            html += `<strong>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù„ÙØ§Øª:</strong> ${files.length}<br>`;
            html += '<strong>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª:</strong><br>';
            files.forEach((file, index) => {
                html += `${index + 1}. ${file.name} - ${(file.size / (1024 * 1024)).toFixed(2)} Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª<br>`;
            });
            html += '</div>';
            
            if (validation.isValid) {
                html += '<div class="success">âœ… Ø¬Ù…ÙŠØ¹ Ø§Ù„ØµÙˆØ± ØµØ§Ù„Ø­Ø© ÙˆÙŠÙ…ÙƒÙ† Ø±ÙØ¹Ù‡Ø§</div>';
            } else {
                html += `<div class="error">âŒ ${validation.errorMessage}</div>`;
                if (validation.invalidFiles) {
                    html += `<div class="error"><strong>Ø§Ù„Ù…Ù„ÙØ§Øª ØºÙŠØ± Ø§Ù„ØµØ§Ù„Ø­Ø©:</strong> ${validation.invalidFiles.join(', ')}</div>`;
                }
            }
            
            resultDiv.innerHTML = html;
        }

        // Ø¥Ø¶Ø§ÙØ© Ù…Ø³ØªÙ…Ø¹Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        document.getElementById('singleFile').addEventListener('change', function() {
            if (this.files.length > 0) {
                testSingleFile();
            }
        });

        document.getElementById('multipleFiles').addEventListener('change', function() {
            if (this.files.length > 0) {
                testMultipleFiles();
            }
        });
    </script>
</body>
</html>
